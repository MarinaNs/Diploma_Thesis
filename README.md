Αλγόριθμοι συνδυαστικής βελτιστοποίησης για το πρόβλημα της χωροθέτησης ηλεκτρικών φορτιστών


**Συγγραφέας:** Μαρίνα Νούση  
**Πανεπιστήμιο:** Τμήμα Ηλεκτρολόγων Μηχανικών και Μηχανικών Υπολογιστών, Πανεπιστήμιο Δυτικής Μακεδονίας  
**Επιβλέπων:**  Νικόλαος Πλόσκας  
**Διπλωματική Εργασία:** Αλγόριθμοι συνδυαστικής βελτιστοποίησης για το πρόβλημα της χωροθέτησης ηλεκτρικών φορτιστών


Το παρόν repository περιλαμβάνει κώδικα που αναπτύχθηκε στο πλαίσιο της διπλωματικής εργασίας με θέμα:
**«Αλγόριθμοι συνδυαστικής βελτιστοποίησης για το πρόβλημα της χωροθέτησης ηλεκτρικών φορτιστών»**. Στόχος της εργασίας είναι ο εντοπισμός των βέλτιστων σημείων για την εγκατάσταση σταθμών φόρτισης ηλεκτρικών οχημάτων, με σκοπό την ελαχιστοποίηση της συνολικής απόστασης μεταξύ κόμβων ζήτησης και εξυπηρέτησης (πρόβλημα p-median). Η επίλυση του προβλήματος λαμβάνει υπόψη περιορισμούς κόστους, χωρητικότητας και γεωγραφικής προσβασιμότητας. Η επίλυση του προβλήματος βασίστηκε σε μεθόδους ακέραιου γραμμικού προγραμματισμού, ευρετικές και μεθευρετικές τεχνικές.

Το αποθετήριο περιλαμβάνει:
- Μοντέλα ακέραιου γραμμικού προγραμματισμού υλοποιημένα με **Pyomo** και **Gurobi**,
- Ευρετικούς και μεθευρετικούς αλγορίθμους για παραγωγή και βελτιστοποίηση λύσεων,
- Δομές **Branch & Bound** με τέσσερις παραλλαγές στρατηγικών αναζήτησης,
- Αναλυτικό κώδικα για πειραματική αξιολόγηση και σύγκριση των μεθόδων.

Όλοι οι αλγόριθμοι συνοδεύονται από αναλυτική περιγραφή, απαιτήσεις και παραδείγματα χρήσης.

## Περιεχόμενα

- [Γεννήτρια προβλημάτων (`flpgenerator.py`)](#γεννήτρια-προβλημάτων-flpgeneratorpy)
- [Μοντελοποίηση τοποθέτησης σταθμών φόρτισης ηλεκτρικών οχημάτων (`model.py`)](#μοντελοποίηση-τοποθέτησης-σταθμών-φόρτισης-ηλεκτρικών-οχημάτων-modelpy)
- [Μοντέλο p-Median με το Gurobi API (`problems.py`)](#μοντέλο-p-median-με-το-gurobi-api-problemspy)
- [Branch & Bound αλγόριθμοι](#branch--bound-αλγόριθμοι)
  - [Branch_Bound_BestFS_DistanceFrom0.5.py](#branch-and-bound-με-best-first-search-και-distance-from-05-heuristic-branchbound_bestfs_distancefrom05py)
  - [Branch_Bound_BestFS_MinDistance.py](#branch-and-bound-με-best-first-search-και-min-distance-heuristic-branch_bound_bestfs_mindistancepy)
  - [Branch_Bound_DFS_DistanceFrom0.5.py](#branch-and-bound-με-depth-first-search-και-distance-from-05-heuristic-branch_bound_dfs_distancefrom05py)
  - [Branch_Bound_DFS_MinDistance.py](#branch-and-bound-με-depth-first-search-και-min-distance-heuristic-branch_bound_dfs_mindistancepy)

- [Μεθευρετικοί αλγόριθμοι](#μεθευρετικοί-αλγόριθμοι)
  - [VNS_Branch&Bound.py](#variable-neighborhood-search-vns_branchboundpy)
  - [Simulated_Annealing_Branch&Bound.py](#simulated-annealing-simulated_annealing_branchboundpy)
  - [GAFacilityOpt Γενετικός Αλγόριθμος (Genetic_Algorithm.py)](#gafacilityopt-γενετικός-αλγόριθμος-genetic_algorithmpy)



---

# Γεννήτρια προβλημάτων (flpgenerator.py)

Ο παρών κώδικας αναπτύχθηκε για τη δημιουργία συνόλων δεδομένων προβλημάτων τοποθέτησης εγκαταστάσεων (facility location problem generator). Δημιουργεί τυχαίες τοποθεσίες υποψήφιων εγκαταστάσεων και πελατών σε ένα τετραγωνικό πλέγμα, υπολογίζει αποστάσεις (Ευκλείδειες και διαδρομών Manhattan) μεταξύ τους και παράγει περιορισμούς απόστασης μεταξύ εγκαταστάσεων και πελατών. Παράλληλα, παράγει τυχαίες τιμές για τον αριθμό φορτιστών (θέσεων) και τη χωρητικότητα κάθε εγκατάστασης και αποθηκεύει το πρόβλημα σε αρχείο.

Η διαδικασία περιλαμβάνει:

- Δημιουργία πλέγματος (grid) με σημεία που μπορεί να φιλοξενήσουν εγκαταστάσεις ή πελάτες
- Τυχαία επιλογή πελατών εντός του πλέγματος
- Υπολογισμός Ευκλείδειων και Manhattan αποστάσεων μεταξύ όλων των σημείων
- Δημιουργία περιορισμών αποστάσεων μεταξύ εγκαταστάσεων και μεταξύ εγκαταστάσεων και πελατών
- Δημιουργία χωρητικοτήτων και αριθμού φορτιστών για κάθε εγκατάσταση
- Αποθήκευση των παραπάνω δεδομένων σε αρχεία κειμένου, σε κατάλληλη μορφή για χρήση σε βελτιστοποιητικά μοντέλα


Ο κώδικας:

- Διαβάζει παραμέτρους εισόδου (μέγεθος πλέγματος, πλήθος σημείων, πελατών, εγκαταστάσεων, αριθμό προβλημάτων) μέσω command-line arguments  
- Αρχικοποιεί το πλέγμα και τις συντεταγμένες των σημείων  
- Υπολογίζει αποστάσεις Ευκλείδειες και Manhattan μεταξύ όλων των σημείων  
- Επιλέγει τυχαία πελάτες μεταξύ των σημείων  
- Δημιουργεί τυχαίους περιορισμούς απόστασης μεταξύ εγκαταστάσεων και πελατών  
- Δημιουργεί πίνακες χωρητικότητας και θέσεων φόρτισης για τις εγκαταστάσεις  
- Αποθηκεύει τα δεδομένα προβλήματος σε αρχεία με μορφή κειμένου (.txt) σε φάκελο με όνομα βασισμένο στις παραμέτρους  
- Υποστηρίζει τη δημιουργία πολλαπλών προβλημάτων ταυτόχρονα  

Η αποθήκευση των αποτελεσμάτων περιλαμβάνει:

- Διαστάσεις πλέγματος, αριθμό πελατών, υποψηφίων εγκαταστάσεων, εγκαταστάσεων προς χωροθέτηση
- Λίστες με πελάτες και υποψήφιες θέσεις εγκαταστάσεων
- Πληροφορίες για αριθμό θέσεων φόρτισης και χωρητικότητα εγκαταστάσεων
- Περιορισμούς αποστάσεων μεταξύ εγκαταστάσεων και πελατών
- Πίνακες αποστάσεων (Ευκλείδειες και Manhattan) μεταξύ εγκαταστάσεων και μεταξύ πελατών-εγκαταστάσεων

## Απαιτήσεις

Για την εκτέλεση απαιτούνται:
- Python 3.x
- Εγκατεστημένα πακέτα:
  - `numpy` – για αριθμητικούς υπολογισμούς και πίνακες
  - `argparse` – για επεξεργασία ορισμάτων γραμμής εντολών
  - `random` – για παραγωγή τυχαίων αριθμών και επιλογών
- Ενσωματωμένα πακέτα Python:
  - `os` – για λειτουργίες σχετικές με το λειτουργικό σύστημα (αρχεία, κατάλογοι)

## Εκτέλεση

Η χρήση γίνεται από **γραμμή εντολών**, με βασική δομή:

```bash
python <flpgenerator>.py <grid_size> <total_points> <clients> <facilities> <num_problems> 
```

Παράδειγμα:
```bash 
> python flpgenerator.py 5 25 10 5 2 
```

---

# Μοντελοποίηση Τοποθέτησης Σταθμών Φόρτισης Ηλεκτρικών Οχημάτων (model.py)

Ο παρών κώδικας αναπτύχθηκε για τη μοντελοποίηση και επίλυση του προβλήματος βελτιστοποίησης της τοποθέτησης σταθμών φόρτισης ηλεκτρικών οχημάτων, με χρήση του εργαλείου **Pyomo** για τη διατύπωση του μοντέλου και κλήση του λύτη **Gurobi** για την επίλυση του. 
Χαρακτηριστικό: υψηλού επιπέδου μοντελοποίηση με Pyomo, εύκολη επεκτασιμότητα και πιο καθαρή διαχείριση των δεδομένων.

Η διαδικασία περιλαμβάνει:

- Επιλογή θέσεων εγκατάστασης
- Επιλογή τύπων φορτιστών
- Αντιστοίχιση πελατών σε εγκαταστάσεις
- Περιορισμούς ισχύος και κόστους
- Γεωγραφικούς περιορισμούς (μέγιστες αποστάσεις πελατών-σταθμών και απαγορεύσεις ταυτόχρονης γειτονικής εγκατάστασης)

Ο κώδικας:

- Διαβάζει δεδομένα εισόδου από αρχεία κειμένου
- Δημιουργεί ένα ακέραιο γραμμικό μοντέλο 
- Υλοποιεί περιορισμούς (π.χ. χωρητικότητα, ζήτηση, συμβατότητα, απόσταση)
- Ελαχιστοποιεί τη συνολική απόσταση εξυπηρέτησης πελατών
- Υποστηρίζεται η επίλυση μεμονωμένων ή πολλαπλών αρχείων προβλημάτων με ευέλικτη επιλογή μέσω ορίσματος --problems
- Καταγράφει αποτελέσματα (μέσο χρόνο εκτέλεσης και μέση τιμή αντικειμενικής συνάρτησης)
- Αποθηκεύει τα αποτελέσματα σε αρχείο `results.txt` σε μορφή CSV


---

## Απαιτήσεις

Για την εκτέλεση απαιτούνται:
- Python 3.x
- Pyomo (http://www.pyomo.org/) 
- Gurobi Optimizer (https://www.gurobi.com/) 
- Εγκατεστημένα πακέτα:
  - `numpy` 
  - `argparse`
  - `random` 
  - `os` 
  - `csv` 

Μπορείς να εγκαταστήσεις τις απαραίτητες Python βιβλιοθήκες με την εντολή:

```bash
pip install pyomo numpy
```

## Εκτέλεση

Η χρήση γίνεται από **γραμμή εντολών**, με βασική δομή:

```bash
python model.py <directory> --problems <problem_files>
```

Αν δεν δοθούν συγκεκριμένα προβλήματα, ο κώδικας επιλύει όλα τα αρχεία του φακέλου.

Παράδειγμα:
```bash 
> python model.py ./25_10_5/ --problems 0.txt
```


---

# Μοντέλο p-Median με το Gurobi API (problems.py)

Ο κώδικας υλοποιεί ένα μοντέλο βελτιστοποίησης για το πρόβλημα χωροθέτησης p-median με φορτιστές ηλεκτρικών οχημάτων απευθείας μέσω της βιβλιοθήκης **Gurobi**. Η συνάρτηση pmedian διαβάζει δεδομένα από αρχεία, δημιουργεί και διαμορφώνει το μαθηματικό μοντέλο με περιορισμούς και επιστρέφει το μοντέλο μαζί με βοηθητικά δεδομένα. Αυτή η συνάρτηση καλείται από εξωτερικό κώδικα, ο οποίος μπορεί στη συνέχεια να εκτελέσει την επίλυση ή περαιτέρω επεξεργασία του μοντέλου.
Χαρακτηριστικό: πλήρης έλεγχος του μοντέλου μέσω Gurobi API, με ευκολία διαχείρισης δυναμικών περιορισμών και custom επίλυσης.

Η διαδικασία περιλαμβάνει:
- Επιλογή θέσεων εγκατάστασης φορτιστών ηλεκτρικών οχημάτων
- Επιλογή τύπων φορτιστών ανά θέση
- Αντιστοίχιση πελατών σε εγκαταστάσεις με βάση απόσταση και ζήτηση
- Περιορισμούς ισχύος, κόστους και μέγιστης απόστασης πελάτη
- Συμμόρφωση με γεωγραφικούς και συμβατότητας περιορισμούς (μέγιστες αποστάσεις πελατών-σταθμών, μη ταυτόχρονη λειτουργία κοντινών εγκαταστάσεων)

Ο κώδικας:
- Διαβάζει δεδομένα εισόδου από αρχεία κειμένου με τις παραμέτρους του προβλήματος
- Δημιουργεί ένα ακέραιο γραμμικό μοντέλο βελτιστοποίησης με τη βιβλιοθήκη Gurobi
- Υλοποιεί περιορισμούς χωρητικότητας, ζήτησης, κόστους, αποστάσεων και συμβατότητας
- Ελαχιστοποιεί τη συνολική απόσταση εξυπηρέτησης πελατών προς τις εγκαταστάσεις
- Υποστηρίζει επίλυση πολλαπλών προβλημάτων από φάκελο αρχείων
- Επιστρέφει το μοντέλο μαζί με βοηθητικά δεδομένα για περαιτέρω χρήση από εξωτερικό κώδικα

## Απαιτήσεις

- Python 3.7+
- Gurobi Optimizer (με ενεργοποιημένη άδεια χρήσης)
- Εγκατεστημένα πακέτα:
  - `numpy`
  - `pyomo`
  - `gurobipy`
  - `argparse`
  - `csv`
- Ενσωματωμένα πακέτα Python:
  - `os`
  - `sys`
  - `random`
  - `time`



## Εκτέλεση

Η επίλυση των προβλημάτων δεν γίνεται απευθείας από τη γραμμή εντολών, αλλά μέσω κλήσης της συνάρτησης pmedian(filename) που περιέχεται στον κώδικα. Ένας φάκελος με αρχεία προβλημάτων (.txt) μπορεί να επεξεργαστεί μαζικά μέσω της συνάρτησης process_all_files_in_folder(folder_path) που καλεί εσωτερικά τη pmedian για κάθε αρχείο. Αν όμως το επιθυμείτε, μπορείτε να καλέσετε χειροκίνητα τη συνάρτηση pmedian() από άλλο σκριπτ ή μέσα σε ένα περιβάλλον Python, περνώντας ως παράμετρο το όνομα του αρχείου δεδομένων.

Παράδειγμα:
```bash 
> from problems import pmedian

model, ub, lb, integer_var, num_vars, c = pmedian("data/problem1.txt")
# Εδώ μπορείτε να λύσετε το μοντέλο ή να κάνετε περαιτέρω επεξεργασία
model.optimize()
```
---

# Branch and Bound με Best-First Search και Distance-from-0.5 Heuristic (Branch&Bound_BestFS_DistanceFrom0.5.py)

Το παρόν υπολογιστικό πρόγραμμα αντιμετωπίζει το πρόβλημα p-median μέσω της εφαρμογής του αλγορίθμου **Branch and Bound**, σε συνδυασμό με το λύτη **Gurobi**. Η διαδικασία επίλυσης ενισχύεται από εξειδικευμένες ευρετικές προσεγγίσεις, όπως η Distance from 0.5 heuristic, καθώς και από τεχνικές αναζήτησης, όπως η μέθοδος Best First Search. Σκοπός του συστήματος είναι η προσέγγιση της βέλτιστης λύσης σε προβλήματα βελτιστοποίησης εγκατάστασης υποδομών.

Η επίλυση περιλαμβάνει τα εξής βασικά στάδια:
- Επιλογή θέσεων εγκατάστασης
- Επιλογή τύπων φορτιστών
- Αντιστοίχιση πελατών σε εγκαταστάσεις
- Επιβολή περιορισμών όπως:
  - Χωρητικότητα και ζήτηση
  - Τύποι φορτιστών και συμβατότητα εγκατάστασης
  - Απόσταση εξυπηρέτησης
  -  Συνολική ισχύς και κόστος

Ο κώδικας:
- Διαβάζει δεδομένα εισόδου από .txt αρχεία που περιέχουν πληροφορίες για πελάτες, σημεία εγκατάστασης, αποστάσεις, τύπους φορτιστών και περιορισμούς
- Δημιουργεί ακέραιο γραμμικό μοντέλο με χρήση Gurobi
- Υλοποιεί όλους τους απαραίτητους περιορισμούς (συμβατότητα, απόσταση, χωρητικότητα, επιλογή σημείων, κλπ.)
- Αρχικά εκτελεί αλγόριθμο Branch and Bound με Best-First Search και ευρετική Distance from 0.5 για να εντοπίσει καλή λύση γρήγορα
  - Επιλύει αρχικά το συνεχές (χαλαρό) πρόβλημα με Gurobi
  - Εξετάζει αν η λύση είναι ακέραια. Αν όχι, επιλέγει για διακλάδωση τη μη ακέραια μεταβλητή εγκατάστασης (z) με τη μικρότερη απόσταση απο το 0.5
  - Δημιουργεί δύο διακλαδώσεις (left: z=0, right: z=1) και τις προσθέτει σε λίστα κόμβων
  - Επιλέγει για εξερεύνηση τον κόμβο με το καλύτερο bound, εφαρμόζοντας Best-First Search
  - Ελέγχει κάθε λύση αν είναι ακέραια, συγκρίνει με την καλύτερη μέχρι στιγμής και ενημερώνει το upper/lower bound
  - Διακόπτει τη διαδικασία αν η διαφορά μεταξύ lower και upper bound (gap) είναι μικρότερη από 1e-6, οπότε θεωρείται ότι έχει βρεθεί βέλτιστη λύση
  - Αξιοποιεί βάσεις (vbasis / cbasis) από γονικούς κόμβους για warm start στο Gurobi
  - Καταγράφει τις εφικτές λύσεις και την καλύτερη τελική τιμή αντικειμενικής συνάρτησης
- Σταθεροποιεί τις μεταβλητές z που σχετίζονται με την επιλογή εγκαταστάσεων βάσει της καλύτερης λύσης από το Branch and Bound
- Επαναλύει το μοντέλο με Gurobi για να βελτιώσει ή επικυρώσει τη λύση
- Εκτυπώνει μόνο τις μη μηδενικές μεταβλητές (για καθαρή απεικόνιση της λύσης)
- Καταγράφει αποτελέσματα για κάθε αρχείο:
   - Ολικό χρόνο εκτέλεσης (Branch&Bound + Gurobi)
   - Τελική τιμή αντικειμενικής συνάρτησης
- Αποθηκεύει τα αποτελέσματα σε αρχείο CSV με όνομα:
results_BestFS_Distancefrom0.5_<foldername>.txt

Τα αποτελέσματα για κάθε αρχείο καταγράφονται σε μορφή CSV (results_BestFS_Distancefrom0.5_<foldername>.txt), το οποίο περιλαμβάνει βασικούς δείκτες απόδοσης για κάθε instance: το όνομα του αρχείου, τη συνολική χρονική διάρκεια επίλυσης και τη βέλτιστη τιμή της αντικειμενικής συνάρτησης. Η συγκεκριμένη καταγραφή διευκολύνει την περαιτέρω ανάλυση των επιδόσεων του αλγορίθμου και την αξιολόγηση της ποιότητας των παραγόμενων λύσεων.

## Απαιτήσεις
- Python 3.7+
- Gurobi Optimizer 
- Εγκατεστημένα πακέτα:
  - `numpy`
  - `gurobipy`
  - `csv`
  - `os`, `sys`, `time` (ενσωματωμένα)

Για να εγκαταστήσετε τα απαραίτητα πακέτα:

```bash
pip install numpy gurobipy
```
Το `gurobipy` είναι το Python interface για το Gurobi. Θα πρέπει να έχεις εγκατεστημένο και το Gurobi Optimizer (τον solver) στον υπολογιστή — η βιβλιοθήκη `gurobipy` από μόνη της δεν αρκεί.

## Εκτέλεση
Για να εκτελέσετε το πρόγραμμα για όλα τα .txt αρχεία ενός φακέλου, χρησιμοποιήστε:

```bash
python "Branch&Bound_BestFS_Distancefrom0.5.py" "C:/Path/To/Folder"
```
Παράδειγμα: 

```bash
> python "Branch&Bound_BestFS_Distancefrom0.5.py" "C:/Users/hp-i3/25_10_5"
```

---

#  Branch and Bound με Best-First Search και Min Distance Heuristic (Branch_Bound_BestFS_MinDistance.py)

Το παρόν υπολογιστικό πρόγραμμα αντιμετωπίζει το πρόβλημα p-median μέσω της εφαρμογής του αλγορίθμου **Branch and Bound**, σε συνδυασμό με το λύτη **Gurobi**. Η διαδικασία επίλυσης ενισχύεται από εξειδικευμένες ευρετικές προσεγγίσεις, όπως η Min Distance, καθώς και από τεχνικές αναζήτησης, όπως η μέθοδος Best First Search. Σκοπός του συστήματος είναι η προσέγγιση της βέλτιστης λύσης σε προβλήματα βελτιστοποίησης εγκατάστασης υποδομών.

Η επίλυση περιλαμβάνει τα εξής βασικά στάδια:
- Επιλογή θέσεων εγκατάστασης
- Επιλογή τύπων φορτιστών
- Αντιστοίχιση πελατών σε εγκαταστάσεις
- Επιβολή περιορισμών όπως:
  - Χωρητικότητα και ζήτηση
  - Τύποι φορτιστών και συμβατότητα εγκατάστασης
  - Απόσταση εξυπηρέτησης
  - Συνολική ισχύς και κόστος

Ο κώδικας:
- Διαβάζει δεδομένα εισόδου από .txt αρχεία που περιέχουν πληροφορίες για πελάτες, σημεία εγκατάστασης, αποστάσεις, τύπους φορτιστών και περιορισμούς
- Δημιουργεί ακέραιο γραμμικό μοντέλο με χρήση Gurobi
- Υλοποιεί όλους τους απαραίτητους περιορισμούς (συμβατότητα, απόσταση, χωρητικότητα, επιλογή σημείων, κλπ.)
- Αρχικά εκτελεί αλγόριθμο Branch and Bound με Best-First Search και ευρετική Min Distance για να εντοπίσει καλή λύση γρήγορα
  - Επιλύει αρχικά το συνεχές (χαλαρό) πρόβλημα με Gurobi
  - Εξετάζει αν η λύση είναι ακέραια. Αν όχι, επιλέγει για διακλάδωση τη μεταβλητή εγκατάστασης (z) με τη μικρότερη συνολική απόσταση απο όλους τους πελάτες (Min Distance heuristic)
  - Δημιουργεί δύο διακλαδώσεις (left: z=0, right: z=1) και τις προσθέτει σε λίστα κόμβων
  - Επιλέγει για εξερεύνηση τον κόμβο με το καλύτερο bound, εφαρμόζοντας Best-First Search
  - Ελέγχει κάθε λύση αν είναι ακέραια, συγκρίνει με την καλύτερη μέχρι στιγμής και ενημερώνει το upper/lower bound
  - Διακόπτει τη διαδικασία αν η διαφορά μεταξύ lower και upper bound (gap) είναι μικρότερη από 1e-6, οπότε θεωρείται ότι έχει βρεθεί βέλτιστη λύση
  - Αξιοποιεί βάσεις (vbasis / cbasis) από γονικούς κόμβους για warm start στο Gurobi
  - Καταγράφει τις εφικτές λύσεις και την καλύτερη τελική τιμή αντικειμενικής συνάρτησης
- Σταθεροποιεί τις μεταβλητές z που σχετίζονται με την επιλογή εγκαταστάσεων βάσει της καλύτερης λύσης από το Branch and Bound
- Επαναλύει το μοντέλο με Gurobi για να βελτιώσει ή επικυρώσει τη λύση
- Εκτυπώνει μόνο τις μη μηδενικές μεταβλητές (για καθαρή απεικόνιση της λύσης)
- Καταγράφει αποτελέσματα για κάθε αρχείο:
   - Ολικό χρόνο εκτέλεσης (Branch&Bound + Gurobi)
   - Τελική τιμή αντικειμενικής συνάρτησης
- Αποθηκεύει τα αποτελέσματα σε αρχείο CSV με όνομα:
results_BestFS_MinDistance_<foldername>.txt

Τα αποτελέσματα για κάθε αρχείο καταγράφονται σε μορφή CSV (results_BestFS_MinDistance_<foldername>.txt), το οποίο περιλαμβάνει βασικούς δείκτες απόδοσης για κάθε instance: το όνομα του αρχείου, τη συνολική χρονική διάρκεια επίλυσης και τη βέλτιστη ή προσεγγιστική τιμή της αντικειμενικής συνάρτησης. Η συγκεκριμένη καταγραφή διευκολύνει την περαιτέρω ανάλυση των επιδόσεων του αλγορίθμου και την αξιολόγηση της ποιότητας των παραγόμενων λύσεων.

## Απαιτήσεις
- Python 3.7+
- Gurobi Optimizer 
- Εγκατεστημένα πακέτα:
  - `numpy`
  - `gurobipy`
  - `csv`
  - `os`, `sys`, `time` (ενσωματωμένα)

Για να εγκαταστήσετε τα απαραίτητα πακέτα:

```bash
pip install numpy gurobipy
```
Το `gurobipy` είναι το Python interface για το Gurobi. Θα πρέπει να έχεις εγκατεστημένο και το Gurobi Optimizer (τον solver) στον υπολογιστή — η βιβλιοθήκη `gurobipy` από μόνη της δεν αρκεί.

## Εκτέλεση
Για να εκτελέσετε το πρόγραμμα για όλα τα .txt αρχεία ενός φακέλου, χρησιμοποιήστε:

```bash
python "Branch&Bound_BestFS_MinDistance.py" "C:/Path/To/Folder"
```
Παράδειγμα: 

```bash
> python "Branch&Bound_BestFS_MinDistance.py" "C:/Users/hp-i3/25_10_5"
```
---

##  Branch and Bound με Depth First Search και Distance-from-0.5 Heuristic (Branch_Bound_DFS_DistanceFrom0.5.py)

Το παρόν υπολογιστικό πρόγραμμα αντιμετωπίζει το πρόβλημα p-median μέσω της εφαρμογής του αλγορίθμου **Branch and Bound**, σε συνδυασμό με το λύτη **Gurobi**. Η διαδικασία επίλυσης ενισχύεται από εξειδικευμένες ευρετικές προσεγγίσεις, όπως η Distance from 0.5 heuristic, καθώς και από τεχνικές αναζήτησης, όπως η μέθοδος Depth First Search. Σκοπός του συστήματος είναι η προσέγγιση της βέλτιστης λύσης σε προβλήματα βελτιστοποίησης εγκατάστασης υποδομών.

Η επίλυση περιλαμβάνει τα εξής βασικά στάδια:
- Επιλογή θέσεων εγκατάστασης
- Επιλογή τύπων φορτιστών
- Αντιστοίχιση πελατών σε εγκαταστάσεις
- Επιβολή περιορισμών όπως:
  - Χωρητικότητα και ζήτηση
  - Τύποι φορτιστών και συμβατότητα εγκατάστασης
  - Απόσταση εξυπηρέτησης
  -  Συνολική ισχύς και κόστος

Ο κώδικας:
- Διαβάζει δεδομένα εισόδου από .txt αρχεία που περιέχουν πληροφορίες για πελάτες, σημεία εγκατάστασης, αποστάσεις, τύπους φορτιστών και περιορισμούς
- Δημιουργεί ακέραιο γραμμικό μοντέλο με χρήση Gurobi
- Υλοποιεί όλους τους απαραίτητους περιορισμούς (συμβατότητα, απόσταση, χωρητικότητα, επιλογή σημείων, κλπ.)
- Αρχικά εκτελεί αλγόριθμο Branch and Bound με Depth First Search και ευρετική Distance from 0.5 για να εντοπίσει καλή λύση γρήγορα
  - Επιλύει αρχικά το συνεχές (χαλαρό) πρόβλημα με Gurobi
  - Εξετάζει αν η λύση είναι εφικτή και ακέραια. Αν όχι, επιλέγει για διακλάδωση τη μη ακέραια μεταβλητή εγκατάστασης (z) με τη μικρότερη απόσταση απο το 0.5
  - Δημιουργεί δύο διακλαδώσεις (left: z=0, right: z=1) και τις προσθέτει στη στοίβα
  - Εξερευνά τους κόμβους με χρήση στοίβας (LIFO), δηλαδή εφαρμόζει στρατηγική Depth-First Search (πρώτα το δεξιό κόμβο και έπειτα τον αριστερό)
  - Ελέγχει κάθε λύση αν είναι ακέραια, συγκρίνει με την καλύτερη μέχρι στιγμής και ενημερώνει το upper/lower bound
  - Διακόπτει τη διαδικασία αν η διαφορά μεταξύ lower και upper bound (gap) είναι μικρότερη από 1e-6, οπότε θεωρείται ότι έχει βρεθεί βέλτιστη λύση
  - Αξιοποιεί βάσεις (vbasis / cbasis) από γονικούς κόμβους για warm start στο Gurobi
  - Καταγράφει τις εφικτές λύσεις και την καλύτερη τελική τιμή αντικειμενικής συνάρτησης
- Σταθεροποιεί τις μεταβλητές z που σχετίζονται με την επιλογή εγκαταστάσεων βάσει της καλύτερης λύσης από το Branch and Bound
- Επαναλύει το μοντέλο με Gurobi για να βελτιώσει ή επικυρώσει τη λύση
- Εκτυπώνει μόνο τις μη μηδενικές μεταβλητές (για καθαρή απεικόνιση της λύσης)
- Καταγράφει αποτελέσματα για κάθε αρχείο:
   - Ολικό χρόνο εκτέλεσης (Branch&Bound + Gurobi)
   - Τελική τιμή αντικειμενικής συνάρτησης
- Αποθηκεύει τα αποτελέσματα σε αρχείο CSV με όνομα:
results_DFS_Distancefrom0.5_<foldername>.txt

Τα αποτελέσματα για κάθε αρχείο καταγράφονται σε μορφή CSV (results_DFS_Distancefrom0.5_<foldername>.txt), το οποίο περιλαμβάνει βασικούς δείκτες απόδοσης για κάθε instance: το όνομα του αρχείου, τη συνολική χρονική διάρκεια επίλυσης και τη βέλτιστη τιμή της αντικειμενικής συνάρτησης. Η συγκεκριμένη καταγραφή διευκολύνει την περαιτέρω ανάλυση των επιδόσεων του αλγορίθμου και την αξιολόγηση της ποιότητας των παραγόμενων λύσεων.

## Απαιτήσεις
- Python 3.7+
- Gurobi Optimizer 
- Εγκατεστημένα πακέτα:
  - `numpy`
  - `gurobipy`
  - `csv`
  - `os`, `sys`, `time` (ενσωματωμένα)

Για να εγκαταστήσετε τα απαραίτητα πακέτα:

```bash
pip install numpy gurobipy
```
Το `gurobipy` είναι το Python interface για το Gurobi. Θα πρέπει να έχεις εγκατεστημένο και το Gurobi Optimizer (τον solver) στον υπολογιστή — η βιβλιοθήκη `gurobipy` από μόνη της δεν αρκεί.

## Εκτέλεση
Για να εκτελέσετε το πρόγραμμα για όλα τα .txt αρχεία ενός φακέλου, χρησιμοποιήστε:

```bash
python "Branch&Bound_DFS_Distancefrom0.5.py" "C:/Path/To/Folder"
```
Παράδειγμα: 

```bash
> python "Branch&Bound_DFS_Distancefrom0.5.py" "C:/Users/hp-i3/25_10_5"
```

---



#  Branch and Bound με Depth-First Search και Min Distance Heuristic (Branch_Bound_DFS_MinDistance.py)

Το παρόν υπολογιστικό πρόγραμμα αντιμετωπίζει το πρόβλημα p-median μέσω της εφαρμογής του αλγορίθμου **Branch and Bound**, σε συνδυασμό με το λύτη **Gurobi**. Η διαδικασία επίλυσης ενισχύεται από εξειδικευμένες ευρετικές προσεγγίσεις, όπως η Min Distance, καθώς και από τεχνικές αναζήτησης, όπως η μέθοδος Depth First Search. Σκοπός του συστήματος είναι η προσέγγιση της βέλτιστης ή σχεδόν βέλτιστης λύσης σε προβλήματα βελτιστοποίησης εγκατάστασης υποδομών.

Η επίλυση περιλαμβάνει τα εξής βασικά στάδια:
- Επιλογή θέσεων εγκατάστασης
- Επιλογή τύπων φορτιστών
- Αντιστοίχιση πελατών σε εγκαταστάσεις
- Επιβολή περιορισμών όπως:
  - Χωρητικότητα και ζήτηση
  - Τύποι φορτιστών και συμβατότητα εγκατάστασης
  - Απόσταση εξυπηρέτησης
  -  Συνολική ισχύς και κόστος

Ο κώδικας:
- Διαβάζει δεδομένα εισόδου από .txt αρχεία που περιέχουν πληροφορίες για πελάτες, σημεία εγκατάστασης, αποστάσεις, τύπους φορτιστών και περιορισμούς
- Δημιουργεί ακέραιο γραμμικό μοντέλο με χρήση Gurobi
- Υλοποιεί όλους τους απαραίτητους περιορισμούς (συμβατότητα, απόσταση, χωρητικότητα, επιλογή σημείων, κλπ.)
- Αρχικά εκτελεί αλγόριθμο Branch and Bound με Depth-First Search και ευρετική Min Distance για να εντοπίσει καλή λύση γρήγορα
  - Επιλύει αρχικά το συνεχές (χαλαρό) πρόβλημα με Gurobi
  - Εξετάζει αν η λύση είναι εφικτή και ακέραια. Αν όχι, επιλέγει για διακλάδωση τη μη ακέραια μεταβλητή εγκατάστασης (z) με τη μικρότερη συνολική απόσταση προς όλους τους πελάτες
  - Δημιουργεί δύο διακλαδώσεις (left: z=0, right: z=1) και τις προσθέτει στη στοίβα (πρώτα το δεξιό κόμβο και έπειτα τον αριστερό)
  - Εξερευνά τους κόμβους με χρήση στοίβας (LIFO), δηλαδή εφαρμόζει στρατηγική Depth-First Search
  - Ελέγχει κάθε λύση αν είναι ακέραια, συγκρίνει με την καλύτερη μέχρι στιγμής και ενημερώνει το upper/lower bound
  - Διακόπτει τη διαδικασία αν η διαφορά μεταξύ lower και upper bound (gap) είναι μικρότερη από 1e-6, οπότε θεωρείται ότι έχει βρεθεί βέλτιστη λύση
  - Αξιοποιεί βάσεις (vbasis / cbasis) από γονικούς κόμβους για warm start στο Gurobi
  - Καταγράφει τις εφικτές λύσεις και την καλύτερη τελική τιμή αντικειμενικής συνάρτησης
- Σταθεροποιεί τις μεταβλητές z που σχετίζονται με την επιλογή εγκαταστάσεων βάσει της καλύτερης λύσης από το Branch and Bound
- Επαναλύει το μοντέλο με Gurobi, με όλες τις μεταβλητές ακέραιες, για να βελτιώσει ή επικυρώσει τη λύση
- Εκτυπώνει μόνο τις μη μηδενικές μεταβλητές (για καθαρή απεικόνιση της λύσης)
- Καταγράφει αποτελέσματα για κάθε αρχείο:
   - Ολικό χρόνο εκτέλεσης (Branch&Bound + Gurobi)
   - Τελική τιμή αντικειμενικής συνάρτησης
- Αποθηκεύει τα αποτελέσματα σε αρχείο CSV με όνομα:
results_DFS_MinDistance_<foldername>.txt

Τα αποτελέσματα για κάθε αρχείο καταγράφονται σε μορφή CSV (results_DFS_MinDistance_<foldername>.txt), το οποίο περιλαμβάνει βασικούς δείκτες απόδοσης για κάθε instance: το όνομα του αρχείου, τη συνολική χρονική διάρκεια επίλυσης και τη βέλτιστη τιμή της αντικειμενικής συνάρτησης. Η συγκεκριμένη καταγραφή διευκολύνει την περαιτέρω ανάλυση των επιδόσεων του αλγορίθμου και την αξιολόγηση της ποιότητας των παραγόμενων λύσεων.

## Απαιτήσεις
- Python 3.7+
- Gurobi Optimizer 
- Εγκατεστημένα πακέτα:
  - `numpy`
  - `gurobipy`
  - `csv`
  - `os`, `sys`, `time` (ενσωματωμένα)

Για να εγκαταστήσετε τα απαραίτητα πακέτα:

```bash
pip install numpy gurobipy
```
Το `gurobipy` είναι το Python interface για το Gurobi. Θα πρέπει να έχεις εγκατεστημένο και το Gurobi Optimizer (τον solver) στον υπολογιστή — η βιβλιοθήκη `gurobipy` από μόνη της δεν αρκεί.

## Εκτέλεση
Για να εκτελέσετε το πρόγραμμα για όλα τα .txt αρχεία ενός φακέλου, χρησιμοποιήστε:

```bash
python "Branch&Bound_DFS_MinDistance.py" "C:/Path/To/Folder"
```
Παράδειγμα: 

```bash
> python "Branch&Bound_DFS_MinDistance.py" "C:/Users/hp-i3/25_10_5"
```
---

# Variable Neighborhood Search (VNS_Branch&Bound.py)

Αυτός ο κώδικας υλοποιεί έναν συνδυασμό **μεθευρετικού αλγορίθμου VNS** και **ακριβούς αλγορίθμου Branch & Bound** με BestFS αναζήτηση και Min Distance ευρετική για τη βελτιστοποίηση της τοποθέτησης φορτιστών σε εγκαταστάσεις, υπό τους περιορισμούς του προβλήματος. Η λύση που προκύπτει απο το μεθευρετικό λειτουργεί ως άνω όριο στον Branch and Bound.

Η επίλυση περιλαμβάνει τα εξής βασικά στάδια:
- **Ανάγνωση δεδομένων εισόδου** μέσω του `read_data()`
- **Ορισμός παραμέτρων προβλήματος:** πλήθος υποψήφιων κόμβων προς εγκατάσταση (N), πελατών (CL), τύποι φορτιστών (F), χωρητικότητες, απόσταση D κ.ά.
- **Μυωπική Ευρετική (Myopic Heuristic):**
  - Διαδοχική επιλογή P εγκαταστάσεων με τοπικά βέλτιστο κόστος
  - Εξέταση όλων των τοποθεσιών & κατανομών φορτιστών
  - Αν βρεθεί εφικτή λύση → χρήση ως αρχική
- **Αν δεν βρεθεί λύση, εφαρμόζεται Randomized Constructive Heuristic:**
  - Τυχαία επιλογή εγκαταστάσεων & κατανομή φορτιστών
  - Επαναλαμβάνεται έως 1000 φορές για εύρεση εφικτής λύσης
- **Εκτέλεση Variable Neighborhood Search (VNS):**
  - Δημιουργία γειτονιών (`create_neighborhoods`)
  - Για κάθε γειτονιά:
    - Εφαρμογή `shaking()` για μετάβαση σε νέο σημείο της λύσης
    - Τοπική αναζήτηση (`local_search_vns()`)
    - Εάν βελτιωθεί η λύση → επιστροφή στην 1η γειτονιά
- **Εκκίνηση Branch & Bound:**
  - Με άνω φράγμα τη λύση του VNS
  - Εφαρμόζεται Best-First Search & Min-Distance Heuristic


| Συναρτήσεις / Modules                | Περιγραφή                                                                                             |
|------------------------------------|-----------------------------------------------------------------------------------------------------|
| `find_best_val(..)`                  | Εξετάζει τοπικές εναλλακτικές λύσεις μέσω αντικατάστασης εγκαταστάσεων.                              |
| `shaking(..)`                       | Διαταράσσει τη λύση μετακινώντας φορτιστές ή αλλάζοντας εγκαταστάσεις, με έλεγχο feasibility.       |
| `generate_random_feasible_solution(..)` | Δημιουργεί εφικτή λύση με τυχαίο τρόπο σε περίπτωση αποτυχίας της μυωπικής.                         |
| `myopic_heuristic(..)`              | Μυωπική ευρετική που επιλέγει διαδοχικά P εγκαταστάσεις με τοπικά βέλτιστο κόστος και ελέγχει feasibility. |
| `create_neighborhoods(k, P, neighborhood_size)` | Δημιουργεί k γειτονιές τυχαίας επιλογής εγκαταστάσεων, για χρήση στον VNS.                        |
| `local_search_vns(neighborhood, solution, ...)` | Εκτελεί τοπική αναζήτηση σε δεδομένη γειτονιά, βελτιώνοντας τη λύση μέσω της `find_best_val()`.    |
| `partial_check_feasibility(solution, ...)` | Ελέγχει μερική εφικτότητα λύσης βάσει περιορισμών, για πρόωρο φιλτράρισμα υποψήφιων λύσεων.        |
| `getAssignmentCost(solution, P, CL, cl_sp_distances)` | Υπολογίζει το κόστος ανάθεσης πελατών σε εγκαταστάσεις (για p-median).                            |
| `check_feasibility(solution, ...)` | Ελέγχει πλήρη εφικτότητα λύσης βάσει όλων των περιορισμών του προβλήματος.                          |
| `VNS_algorithm(kmax, max_iterations, neighborhood_size, solution, ...)` | Εκτελεί τον αλγόριθμο Variable Neighborhood Search (VNS) για βελτίωση της αρχικής λύσης.         |
| `check_distance(solution, binaryCstrs, fp_euc_distances, K)` | Ελέγχει τους περιορισμούς απόστασης μεταξύ ανοιχτών εγκαταστάσεων (για αποφυγή επικάλυψης).         |


Τα αποτελέσματα για κάθε αρχείο καταγράφονται σε μορφή CSV (results_BestFS_MinDistance_VNS_<foldername>.txt), το οποίο περιλαμβάνει βασικούς δείκτες απόδοσης για κάθε instance: το όνομα του αρχείου, χρόνο εκτέλεσης των ευρετικών, χρόνο εκτέλεσης των μεθευρετικών, τη συνολική χρονική διάρκεια επίλυσης Branch&Bound και Gurobi, τη βέλτιστη τιμή της αντικειμενικής συνάρτησης και τη λύση που έδωσε ο μεθευρετικός η οποία χρησιμοποιήθηκε ως άνω όριο στον Branch&Bound. Η συγκεκριμένη καταγραφή διευκολύνει την περαιτέρω ανάλυση των επιδόσεων του αλγορίθμου και την αξιολόγηση της ποιότητας των παραγόμενων λύσεων.

## Απαιτήσεις
- Python 3.7+
- Gurobi Optimizer 
- numpy – Αριθμητικές πράξεις και διαχείριση πινάκων
- time, csv, random, os, sys – Built-in Python βιβλιοθήκες

Για να εγκαταστήσετε τα απαραίτητα πακέτα:

```bash
pip install numpy gurobipy
```
Το `gurobipy` είναι το Python interface για το Gurobi. Θα πρέπει να έχεις εγκατεστημένο και το Gurobi Optimizer (τον solver) στον υπολογιστή — η βιβλιοθήκη `gurobipy` από μόνη της δεν αρκεί.

## Εκτέλεση
Για να εκτελέσετε το πρόγραμμα για όλα τα .txt αρχεία ενός φακέλου, χρησιμοποιήστε:

```bash
python "VNS_Branch&Bound.py" "C:/Path/To/Folder"
```
Παράδειγμα: 

```bash
> python "VNS_Branch&Bound.py" "C:/Users/hp-i3/25_10_5"
```
---

# Simulated Annealing (Simulated_Annealing_Branch&Bound.py)

Αυτός ο κώδικας υλοποιεί έναν συνδυασμό **μεθευρετικού αλγορίθμου Simulated Annealing** και **ακριβούς αλγορίθμου Branch & Bound** με BestFS αναζήτηση και Min Distance ευρετική για τη βελτιστοποίηση της τοποθέτησης φορτιστών σε εγκαταστάσεις, υπό τους περιορισμούς του προβλήματος. Η λύση που προκύπτει από τον μεθευρετικό λειτουργεί ως άνω όριο στον Branch & Bound.

Η επίλυση περιλαμβάνει τα εξής βασικά στάδια:

- **Ανάγνωση δεδομένων εισόδου** μέσω της `read_data()`.
- **Ορισμός παραμέτρων προβλήματος:** πλήθος υποψήφιων κόμβων προς εγκατάσταση (N), πελατών (CL), τύποι φορτιστών (F), χωρητικότητες, απόσταση D κ.ά.
- **Μυωπική Ευρετική (Myopic Heuristic):**
  - Διαδοχική επιλογή P εγκαταστάσεων με τοπικά βέλτιστο κόστος
  - Εξέταση όλων των τοποθεσιών & κατανομών φορτιστών
  - Αν βρεθεί εφικτή λύση → χρήση ως αρχική
- **Αν δεν βρεθεί λύση, εφαρμόζεται Randomized Constructive Heuristic:**
  - Τυχαία επιλογή εγκαταστάσεων & κατανομή φορτιστών
  - Επαναλαμβάνεται έως 1000 φορές για εύρεση εφικτής λύσης
- **Εκτέλεση Simulated Annealing:**
  - Μετατροπή τρέχουσας λύσης σε γειτονική μέσω τυχαίων αλλαγών ενεργοποίησης/απενεργοποίησης εγκαταστάσεων
  - Υπολογισμός κόστους λύσης με βάση την ανάθεση πελατών
  - Έλεγχος εφικτότητας και περιορισμών απόστασης
  - Αποδοχή νέας λύσης αν είναι καλύτερη ή με πιθανότητα που εξαρτάται από τη θερμοκρασία (cooling schedule)
  - Επαναλαμβάνεται για προκαθορισμένο αριθμό επαναλήψεων με σταδιακή μείωση θερμοκρασίας
- **Εκκίνηση Branch & Bound:**
  - Με άνω φράγμα τη λύση του Simulated Annealing
  - Εφαρμογή Best-First Search & Min-Distance Heuristic



| Συναρτήσεις / Modules                  | Περιγραφή                                                                                             |
|--------------------------------------|-----------------------------------------------------------------------------------------------------|
| `get_neighbor(...)`                     |  Δημιουργεί γειτονική λύση αλλάζοντας ενεργή εγκατάσταση: απενεργοποιεί μία, ενεργοποιεί μία άλλη, αντιγράφει φορτιστές με προσαρμογή αν χρειάζεται, και επανατοποθετεί πελάτες στους κοντινότερους σταθμούς. |
| `simulated_annealing_metaheuristic(...)` | Εκτελεί τον αλγόριθμο Simulated Annealing για βελτιστοποίηση της αρχικής λύσης.                    |
| `getAssignmentCost(solution, P, CL, cl_sp_distances)` | Υπολογίζει το κόστος ανάθεσης πελατών σε εγκαταστάσεις (p-median).                                   |
| `check_feasibility(solution, ...)`   | Ελέγχει πλήρη εφικτότητα λύσης βάσει όλων των περιορισμών του προβλήματος.                          |
| `check_distance(solution, binaryCstrs, fp_euc_distances, K)` | Ελέγχει τους περιορισμούς απόστασης μεταξύ ανοιχτών εγκαταστάσεων (για αποφυγή  επικάλυψης).         |
 `generate_random_feasible_solution(..)` | Δημιουργεί εφικτή λύση με τυχαίο τρόπο σε περίπτωση αποτυχίας της μυωπικής.                         |
| `myopic_heuristic(..)`              | Μυωπική ευρετική που επιλέγει διαδοχικά P εγκαταστάσεις με τοπικά βέλτιστο κόστος και ελέγχει feasibility. |
| `partial_check_feasibility(solution, ...)` | Ελέγχει μερική εφικτότητα λύσης βάσει περιορισμών, για πρόωρο φιλτράρισμα υποψήφιων λύσεων.        |


Τα αποτελέσματα για κάθε αρχείο καταγράφονται σε μορφή CSV (results_BestFS_MinDistance_SA<foldername>.txt), το οποίο περιλαμβάνει βασικούς δείκτες απόδοσης για κάθε instance: το όνομα του αρχείου, χρόνο εκτέλεσης των ευρετικών, χρόνο εκτέλεσης των μεθευρετικών, τη συνολική χρονική διάρκεια επίλυσης Branch&Bound και Gurobi, τη βέλτιστη τιμή της αντικειμενικής συνάρτησης και τη λύση που έδωσε ο μεθευρετικός και χρησιμοποιήθηκε ως άνω όριο στον Branch&Bound. Η συγκεκριμένη καταγραφή διευκολύνει την περαιτέρω ανάλυση των επιδόσεων του αλγορίθμου και την αξιολόγηση της ποιότητας των παραγόμενων λύσεων.

## Απαιτήσεις

- Python 3.7+
- Gurobi Optimizer (με εγκατεστημένο το `gurobipy` Python interface)
- numpy – Αριθμητικές πράξεις και διαχείριση πινάκων
- time, csv, random, os, sys – Built-in Python βιβλιοθήκες

Για να εγκαταστήσετε τα απαραίτητα πακέτα:

```bash
pip install numpy gurobipy
```

## Εκτέλεση
Για να εκτελέσετε το πρόγραμμα για όλα τα .txt αρχεία ενός φακέλου, χρησιμοποιήστε:

```bash
python "Simulated_Annealing_Branch&Bound.py" "C:/Path/To/Folder"
```
Παράδειγμα: 

```bash
> python "Simulated_Annealing_Branch&Bound.py" "C:/Users/hp-i3/25_10_5"
```
---


# GAFacilityOpt Γενετικός Αλγόριθμος (Genetic_Algorithm.py)

Αυτός ο κώδικας υλοποιεί έναν Γενετικό Αλγόριθμο (Genetic Algorithm - GA) για την επίλυση του προβλήματος τοποθέτησης σταθμών φόρτισης ηλεκτρικών οχημάτων (Charging Station Location Problem). Ο αλγόριθμος συγκρίνεται με τη βέλτιστη λύση που προκύπτει μέσω του Gurobi Solver.

Η επίλυση περιλαμβάνει τα εξής βασικά στάδια: 
- **Ανάγνωση δεδομένων εισόδου** με τη `read_data()`, η οποία ανακτά:
  - πλήθος εγκαταστάσεων (P), πελατών (CL), υποψήφιες τοποθεσίες (N)
  - τύποι φορτιστών (F), πίνακες αποστάσεων, περιορισμοί κ.ά.

- **Ορισμός μεταβλητών προβλήματος:**
  - Χρωμοσώματα με `num_genes = N·|F| + CL·N + N` για κατανομή φορτιστών (x), αναθέσεις πελατών (y), και άνοιγμα εγκαταστάσεων (z).

- **Μυωπική Ευρετική (Myopic Heuristic):**
  - Επιλογή P εγκαταστάσεων με βάση τοπικά βέλτιστο κόστος (p-median).
  - Προσπάθεια κατασκευής εφικτής λύσης.
  - Αν βρεθεί, προστίθεται στον αρχικό πληθυσμό.

- **Τυχαία Αρχικοποίηση Λύσεων: `initialize_population_with_random_solution()`**
  - Χρησιμοποιείται όταν αποτύχει η μυωπική ευρετική.
  - Δημιουργεί **εφικτή ή σχεδόν εφικτή** λύση μέσω τυχαίας επιλογής εγκαταστάσεων, ανάθεσης πελατών και κατανομής φορτιστών.
  - Εκτελείται έως 100 φορές για αναζήτηση πλήρως εφικτής λύσης· αν αποτύχει, επιστρέφει την καλύτερη σχεδόν εφικτή.
  - Λαμβάνει υπόψη:
    - Τους χωρητικούς περιορισμούς (ισχύος και φυσικού χώρου) κάθε εγκατάστασης.
    - Τις αποστάσεις πελατών-εγκαταστάσεων (δεν επιτρέπονται αναθέσεις εκτός ορίου D).
    - Το συνολικό κόστος εγκατάστασης (φόρτιση & λειτουργία).
    - Τον προϋπολογισμό εγκατάστασης (ανώτατο επιτρεπτό κόστος).
    - Την εφικτότητα πλήρους ανάθεσης όλων των πελατών.
  - Επιπλέον:
    - Εξετάζει όλους τους συνδυασμούς φορτιστών L2/L3 για κάθε εγκατάσταση.
    - Υπολογίζει ποινές σε περίπτωση μη εφικτότητας (π.χ. υπερβάσεις αποστάασεων, ανεξυπηρέτητοι πελάτες).

- **Αρχικοποίηση Πληθυσμού:**
  - Επαναλαμβάνεται έως 100 φορές για να κατασκευαστούν μοναδικές, εφικτές λύσεις μέσω των παραπάνω ευρετικών.

- **Εκτέλεση Γενετικού Αλγορίθμου (PyGAD):**
  - **Fitness function:** αρνητικό συνολικό κόστος p-median και ποινές για παραβίαση περιορισμών
  - **Crossover:** single-point
  - **Mutation:** τυχαία τροποποίηση 10% των γονιδίων
  - **Parent selection:** κατάταξη (rank)
  - **Parallel evaluation:** 4 νήματα
  - **Κριτήριο τερματισμού:** `saturate_200`

- **Σύγκριση με Gurobi:**
  - Εκτελείται το ίδιο instance με Gurobi για αναφορά στη βέλτιστη λύση.
  - Υπολογίζεται το **GAP** σε σχέση με τη λύση του GA.


| Συνάρτησεις/ Modules                                | Περιγραφή                                                                                       |
|------------------------------------------|--------------------------------------------------------------------------------------------------|
| `run_genetic_algorithm(filename)`        | Εκτελεί την πλήρη διαδικασία του GA για ένα instance από αρχείο εισόδου.                        |
| `myopic_heuristic(...)`                  | Προσπαθεί να δημιουργήσει εφικτή λύση με τοπική βελτιστοποίηση επιλογών εγκατάστασης.           |
| `initialize_population_with_random_solution(...)` | Δημιουργεί εφικτή λύση με τυχαίο τρόπο σε περίπτωση αποτυχίας της μυωπικής ευρετικής.     |
| `fitness_func(...)`                      | Υπολογίζει τη συνάρτηση καταλληλότητας βάσει απόστασης ανάθεσης και περιορισμών feasibility.    |
| `decode_solution(...)`                   | Μετατρέπει ένα chromosome σε πίνακες x[i][j], y[k][i], z[i].                                    |
| `getAssignmentCost(...)`                 | Υπολογίζει το κόστος p-median ανάθεσης πελατών σε εγκαταστάσεις.                               |
| `run_model(...)`                         | Εκτελεί την επίλυση με Gurobi για απόκτηση της βέλτιστης λύσης.                                |


Τα αποτελέσματα αποθηκεύονται σε αρχείο CSV `results_GA_<foldername>.txt` και περιλαμβάνουν: όνομα αρχείου instance, χρόνο αρχικοποίησης πληθυσμού, χρόνο εκτέλεσης GA, τελικό fitness (αρνητικό συνολικό κόστος), GAP σε σχέση με Gurobi, συνολικό χρόνο εκτέλεσης ( εύρεσης αρχικού πληθυσμού και εκτέλεσης του γενετικού) και χρόνο επίλυσης με Gurobi. Η συγκεκριμένη καταγραφή διευκολύνει την περαιτέρω ανάλυση των επιδόσεων του αλγορίθμου και την αξιολόγηση της ποιότητας των παραγόμενων λύσεων.

---

# Απαιτήσεις
- Python >= 3.8
- `pygad`
- `numpy`
- `gurobipy` (Gurobi Optimizer με άδεια)
- `csv`, `os`, `time`, `random`

Για να εγκαταστήσετε τα απαραίτητα πακέτα:

```bash
pip install numpy gurobipy
```
```bash
pip install pygad
```

## Εκτέλεση

Για να εκτελέσετε το πρόγραμμα για όλα τα .txt αρχεία ενός φακέλου, χρησιμοποιήστε:

```bash
python "Genetic_Algorithm.py"
```
και θα χρειαστεί να δώσετε το φάκελο για τον οποίο θέλετε να εκτελεστεί το πρόγραμμα

Παράδειγμα: 

```bash
> python "Genetic_Algorithm.py"
Enter the folder path containing the .txt files: "C:/Users/hp-i3/25_10_5"
```
---



